{% extends 'base.html' %}

{% load bootstrap_tags %}

{% block page_title %} | Products{% endblock %}

{% block content %}

<div class="row row-flex mx-3">

    <div class="container-fluid mx-auto">

        <section class="row filtering-row my-3">
        
        <div style="height: 100px; width: 100px; border: 2px solid red;">
        </div>

        <div class="filter-dropdown col-12 col-sm-6 col-md-3" style="border: 1px solid red; height:100px;">
            <!-- SELECTING FILTER_GROUP -->
            <form class="input-group mb-3" action="{% url 'filtered_products' filter_group='room' filter_name='shed' %}"> 
            <!-- action=" url 'filtered_products' data.filter_by item " THIS IS THE SAME URL PATTERN FOR EVERY DROPDOWN -->
                
                <select class="filter_group-select" id="FilterGroupSelect" onchange="this.parentNode.submit()">
                    {% if data.filter_group == 'category' %}
                    <option selected value="category">category</option>
                    {% else %}
                    <option value="category">category</option>
                    {% endif %}
                    {% if data.filter_group == 'room' %}
                    <option selected value="room">room</option>
                    {% else %}
                    <option value="room">room</option>
                    {% endif %}
                    {% if data.filter_group == 'artist' %}
                    <option selected value="artist">artist</option>
                    {% else %}
                    <option value="artist">artist</option>
                    {% endif %}
                    <option selected="{% if data.filter_group == 'category' %}True{% endif %}" value="date_uploaded">Most Recent</option>
                    <option value="num_of_views">Most Viewed</option>
                    <option value="num_of_orders">Most Purchased</option>
                    <option value="rateing">Highest Rated</option>
                </select>




            </form>
        </div>

        </section>

        <section class="row image-display">
            <div class="image-display-container mx-2">
                {% for product in data.products %}
                <div class="products-image-box mb-3">
                    <a href="{% url 'product_details' product.id %}">
                        <img src="{{ MEDIA_URL }}{{ product.image }}" alt="{{product.title}} image" class="products-image">
                    </a>
                    <div class="overlay overlay-title">
                        <p class="overlay-icon">
                            <span class="overlay-title-text">{{ product.title }}</span>
                        </p>
                    </div>
                    <div class="overlay overlay-rate">
                        <a href="{% url 'rate_artwork' product.id %}" class="overlay-icon" title="Rate Artwork">
                            <i class="far fa-thumbs-up"></i>
                        </a>
                    </div>
                    <div class="overlay overlay-cart">
                        <form method="post" class="overlay-icon" title="Add To Shopping Cart" action="{% url 'add_to_cart' product.id %}">
                        {% csrf_token %}
                            <input type="hidden" name="name" value="value" /> 
                            <a onclick="this.parentNode.submit();">
                                <i class="fas fa-cart-plus"></i>
                            </a>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    </div>

</div>

{% endblock %}