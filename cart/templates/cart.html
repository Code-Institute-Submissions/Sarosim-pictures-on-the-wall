{% extends 'base.html' %}

{% load bootstrap_tags %}

{% block page_title %} | Cart{% endblock %}

{% block content %}

<div class="row row-flex">
	{% for item in cart_items %}
	<div class="col-xs-10 m-2 col-sm-6 col-md-4 m-md-3 display panel panel-default">
		<a href="{% url 'product_details' item.id %}">
            <div class="product" style="background-image: url({{ MEDIA_URL }}{{ item.product.image }})"></div>
		</a>
		<div class="caption">
			<h3>{{ item.product.title }}</h3>
			<p class="product-description">{{ item.product.description }}</p>
			<p>
            <span>Price: <i class="fas fa-pound-sign"></i>{{ item.product.base_repro_fee }}</span></p>
			<div>
				<form class="form-inline" method="post" action="{% url 'adjust_cart' item.id %}">
					{% csrf_token %}
					<div class="form-group">
						<label for="exampleInputAmount" class="sr-only">New Qty</label>
						<div class="input-group">
							<div class="input-group-prepend">
								<span class="input-group-text">Qty</span>
							</div>
							<input name="quantity" id="exampleInputAmount" type="number" min="0" max="999" class="form-control" value="{{item.quantity}}">
						</div>
						</div>
						<button type="submit" class="btn btn-secondary p-2 ml-2">Update</button>
				</form>
			</div>
		</div>
	</div>
	{% endfor %}
</div>
<div class="container text-center">
	<p>Total:&nbsp;</p>
	<p class="mx-1">
		<i class="fas fa-pound-sign"></i><span>{{ total }}</span>
	</p>
    {% if total != 0 %}
	<a href="{% url 'checkout' %}" class="btn btn-success" role="button">Checkout</a>
    {% endif %}

    {% if total == 0 %}
    <span>Your cart is empty, you can browse artworks</span>
	<a href="{% url 'products' %}" class="display-link" role="link">here</a>
    <span>...</span>
    {% endif %}


</div>

{% endblock %}